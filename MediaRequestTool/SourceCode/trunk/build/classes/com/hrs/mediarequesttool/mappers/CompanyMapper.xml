<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.hrs.mediarequesttool.mappers.CompanyMapper">
	<select id="getAll" parameterType="map"
		resultType="com.hrs.mediarequesttool.pojos.Company">
		SELECT *
		FROM other_media.contract_company
		<where>
			<if test="query_name != null and query_name != '%%'">
				company_name ILIKE #{query_name}
			</if>
			<if test="query_id != null and query_id != ''">
				OR company_id = #{query_id}
			</if>
		</where>
		<if test="sort != null and direction != null">
			ORDER BY ${sort} ${direction}
		</if>
		<if test="sort == null or sort == ''">
			ORDER BY company_id ASC
		</if>
	</select>
	<select id="paging" parameterType="map"
		resultType="com.hrs.mediarequesttool.pojos.Company">
		SELECT *
		FROM other_media.contract_company
		<if test="sort != null and direction != null">
			ORDER BY ${sort} ${direction}
		</if>
		LIMIT #{page.limit} OFFSET #{page.offset}
	</select>
	<select id="count" resultType="int">
		SELECT COUNT(id)
		FROM
		other_media.contract_company
	</select>
	<select id="get" parameterType="int"
		resultType="com.hrs.mediarequesttool.pojos.Company">
		SELECT *
		FROM other_media.contract_company
		WHERE id = #{id}
	</select>
	<select id="generateId" resultType="int">
		SELECT
		setval('other_media.contract_company_sequence', (SELECT MAX(id) FROM
		other_media.contract_company) + 1)
	</select>
	<insert id="insert" parameterType="com.hrs.mediarequesttool.pojos.Company"
		timeout="10" flushCache="true">
		INSERT INTO
		other_media.contract_company(id,
		company_id, company_name, created_at)
		VALUES(
		#{id},
		#{company_id},
		#{company_name},
		CURRENT_TIMESTAMP);
	</insert>
</mapper>